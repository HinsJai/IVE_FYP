<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Verify Email</title>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://kit.fontawesome.com/c30932d00b.js" crossorigin="anonymous"></script>
    <script src="../js/function.js"></script>
</head>

<body>
    <img src="../images/login_bg.png" class="absolute z-0 bg-no-repeat bg-center w-full h-full">
    <div class="absolute w-full h-full bg-neutral-900/50 z-1"></div>
    <div class="absolute flex gap-2 top-7 left-8 z-2">
        <img src="../images/logo3.png" class="w-12">
        <span class="text-4xl font-bold text-[#FFBE00]">COS</span>
    </div>

    <div class="flex justify-center items-center h-screen">
        <!-- step 1 -->
        <div class="w-[35rem] p-10 rounded-md shadow-2xl z-10 bg-white/70 backdrop-blur-sm">
            <div class="w-full">
                <button
                    class="select-none rounded-lg bg-gradient-to-tr from-gray-900 to-gray-800 py-3 px-6 text-center align-middle font-sans text-xs uppercase text-white shadow-md 
                        shadow-gray-900/10 transition-all hover:shadow-lg hover:shadow-gray-900/20 active:opacity-[0.85] disabled:pointer-events-none disabled:opacity-50 disabled:shadow-none"
                    onclick=logout()>Back
                    <i class="fa-solid fa-right-to-bracket"></i>
                </button>
            </div>
            <div class=" w-full flex justify-center my-7">
                <i class="fa-solid fa-lock text-8xl"></i>
            </div>
            <div class="w-full text-center">
                <p class="text-4xl mb-2">Forgot Password?</p>
                <p class="text-lg">You can reset your password here</p>
            </div>
            <form action="/verify_email_api" method="post" class="mt-10 w-full">
                <div class="relative h-11 w-full min-w-[200px]">
                    <input placeholder="Email" required type="email" name="email" class="peer h-full w-full border-b border-blue-gray-200 bg-transparent pt-4 pb-1.5 font-sans text-sm font-normal 
                    text-blue-gray-700 outline outline-0 transition-all placeholder-shown:border-blue-gray-200 focus:border-gray-900 
                    focus:outline-0 disabled:border-0 disabled:bg-blue-gray-50" />
                    <label
                        class="after:content[' '] pointer-events-none absolute left-0 -top-2.5 flex h-full w-full select-none !overflow-visible 
                    truncate text-base font-normal leading-tight text-gray-500 transition-all after:absolute after:-bottom-2.5 after:block after:w-full 
                    after:scale-x-0 after:border-b-2 after:border-gray-500 after:transition-transform after:duration-300 peer-placeholder-shown:leading-tight 
                    peer-placeholder-shown:text-blue-gray-500 peer-focus:text-sm peer-focus:leading-tight peer-focus:text-gray-900 peer-focus:after:scale-x-100 
                    peer-focus:after:border-gray-900 peer-disabled:text-transparent peer-disabled:peer-placeholder-shown:text-blue-gray-500">
                        Please input your email to verify
                    </label>
                </div>
                <div class="flex justify-center mt-5">
                    <button id="verify"
                        class="select-none rounded-lg bg-gradient-to-tr from-gray-900 to-gray-800 py-3 px-6 text-center align-middle font-sans text-lg font-bold uppercase text-white shadow-md 
                        shadow-gray-900/10 transition-all hover:shadow-lg hover:shadow-gray-900/20 active:opacity-[0.85] disabled:pointer-events-none disabled:opacity-50 disabled:shadow-none">Verify
                    </button>
                </div>
            </form>
        </div>
    </div>
    <div class="absolute flex bottom-6 right-7 gap-7 text-xl text-slate-50 z-2">
        <i class="fa-brands fa-instagram"></i>
        <i class="fa-brands fa-square-facebook"></i>
        <i class="fa-brands fa-linkedin-in"></i>
        <i class="fa-brands fa-youtube"></i>
    </div>
</body>

<script>
    document.querySelector("#verify").addEventListener("click", (envent) => {
        event.preventDefault();
        verify_email();
    });

    function verify_email() {
        var email = $("input[name='email']").val();
        $.ajax({
            contentType: "application/json",
            type: "POST",
            url: "/verify_email_api",
            data: JSON.stringify({
                email: email,
            }),
            success: function (response) {
                if (response["success"] == false) {
                    alert("Email not found");
                }
                else {
                    window.location.replace("/verify_forgot_otp");
                }
            }
        });
    }
</script>

</html>